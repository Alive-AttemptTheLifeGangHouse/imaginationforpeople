

@import "i4p-mixins";
@import "i4p/constants";
@import "i4p/buttons";
@import "i4p/fonts";

$gallery_sizeImageHeight: 197px;
$gallery_sizeImageSmallWidth: 150px;
$gallery_sizeImageBigWidth: 300px;

$gallery_strOverlayUrl: 'project_sheet/gallery_fancy/view-overlay.png';
$gallery_sizeOverlayHeight: image-height($gallery_strOverlayUrl);
$gallery_sizeOverlayWidth: image-width($gallery_strOverlayUrl);
$gallery_sizeModalColumns: 10;
$gallery_sizeModalWidth: $gallery_sizeModalColumns * $gridColumnWidth + $gridGutterWidth * ($gallery_sizeModalColumns);

$gallery_sizeSliderWidth: 540px;
$gallery_sizeSliderHeight: 75px;

$gallery_sizeSliderImageWidth: 88px;
$gallery_sizeSliderImageHeight: 55px;

// act as a bootstrap "container"
.project-gallery-modal {
    box-shadow: 0 0 $sizeShadowHuge rgba(0,0,0,0.5);
    width: $gallery_sizeModalWidth;
    margin-left: -$gallery_sizeModalWidth/2;
    overflow: hidden;

    .row:first-child {
	background-image: image-url('project_sheet/gallery_fancy/horizontal-separator.png');
	background-position: center bottom;
	background-repeat: repeat-x;
    }

    .gallery-slider-container {
	// local anythingslider adaptation
	.anythingSlider {
	    position: relative;
	    height: $gallery_sizeSliderHeight;

	    .anythingWindow {
		height: 100%;
		overflow: hidden;
		position: relative;
		width: $gallery_sizeSliderWidth;
	    }

	    .anythingBase {
		position: absolute;
	    }

	    .panel {
		height: $gallery_sizeSliderHeight;
	    }

	    .activePage {
		img {
		    outline: 1px solid white;
		}
	    }
	}

	.gallery-slider {
	    display: block;
	    overflow: hidden;
	    list-style: none;
	    height: $gallery_sizeSliderHeight;

	    & > li {
		@include box-sizing(border-box);

		float: left;
		display: block;
		margin:0;
		position: relative;
		overflow: hidden;
		height: $gallery_sizeSliderHeight;
		width: 108px;

		img {
		    position: absolute;
		    left: 11px;
		    top: 2px;
		    outline: 1px solid $colorDarkGrey;
		    z-index: 1;
		    height: $gallery_sizeSliderImageHeight;
		    width: $gallery_sizeSliderImageWidth;
		    margin-top: 5px;
		    margin-bottom: 5px;
		}

		// in before, we put the view icon
		&:before {
		    @include i4p-transition(all .5s ease);
		    background-position: center center;
		    background-repeat: no-repeat;
		    background-image: image-url($gallery_strOverlayUrl);
		    content: "";
		    z-index: 3;
		    display: block;
		    height: $gallery_sizeSliderImageHeight;
		    width: $gallery_sizeSliderImageWidth;
		    left: 11px;
		    position: absolute;
		    top: 7px;
		    opacity: 0;
		}

		// in after we manage the darkness
		&:after {
		    @include i4p-transition(all .5s ease);
		    background-color: black;
		    content: "";
		    z-index: 2;
		    display: block;
		    height: $gallery_sizeSliderImageHeight;
		    width: $gallery_sizeSliderImageWidth;
		    left: 11px;
		    position: absolute;
		    top: 7px;
		    opacity: 0.7;
		}

		&:hover {
		    &:after {
			opacity: 0;
		    }

		    &:before {
		    opacity: 1;
		    }
		}


		// FIXME: show view thing over images on overlay
		&:hover {
		    // FIXME
		}
	    }
	}
    }

    .gallery-nav {
	@include i4p-font-subtitle($sizeTextNormal);
	text-transform: uppercase;
	display: block;

	a {
	    color: white;
	    padding: 0;
	    padding-left: $sizePaddingMedium;
	    padding-right: $sizePaddingMedium;
	}
    }

    .viewer-side {
	background-color: black;

	&.top-side {
	    height: 200px;
	}

	&.bottom-side {
	    // FIXME
	    min-height: 100px;
	}
    }

    .information-side {
	&.top-side {
	    // FIXME
	}

	&.bottom-side {
	    a {
		@include i4p-button-fancy-bordered;

		display: block;
		width: 60%;
		margin-top: $sizeTextNormal * 2;
		margin-left: auto;
		margin-right: auto;
	    }
	}
    }
}


.project-gallery-widget {
    ul {
	margin:0;
    }

    .picture {
	width: 100%;
	position: relative;
	height: $gallery_sizeImageHeight;
	overflow: hidden;


	&.picture-big {
	    clear: both;
	    display: block;
	    width: 100%;

	    .overlay-one {
		background-position: (($gallery_sizeImageBigWidth - $gallery_sizeOverlayWidth) / 2) (($gallery_sizeImageHeight - $gallery_sizeOverlayHeight)/2 );
	    }
	}

	&.picture-small {
	    float: left;
	    width: 150px;

	    .image {
		margin-left: -50%;
	    }

	    .overlay-one {
		background-position: (($gallery_sizeImageSmallWidth - $gallery_sizeOverlayWidth) / 2) (($gallery_sizeImageHeight - $gallery_sizeOverlayHeight)/2 );
	    }
	}

	a {
	    width: inherit;
	    height: inherit;
	}

	.image {
	    position: absolute;
	    height: inherit;
	    width: 300px;

	    img {
		position: absolute;
		top: 0;
		left: 0;

		&.color {
		    @include i4p-transition(all .5s ease);
		    opacity: 1;
		}

		&.bw {
		    @include i4p-transition(all .5s ease);
		    opacity: 1;
		}
	    }
	}


	.overlay-one {
	    @include i4p-transition(all .5s ease);
	    display: block;
	    position: absolute;
	    height: inherit;
	    width: inherit;
	    background-image: image-url($gallery_strOverlayUrl);
	    background-repeat: no-repeat;
	    opacity: 0;
	}

	.overlay-two {
	    @include i4p-transition(all .5s ease);
	    display: block;
	    position: absolute;
	    height: inherit;
	    width: inherit;
	    background-image: image-url('base/background-white-dots.png');
	    opacity: 1;
	}

	.description {
	    @include i4p-transition(all .5s ease);
	    @include box-sizing(border-box);
	    opacity: 0;
	    position: absolute;
	    display: block;
	    background-color: rgba(0,0,0,0.7);
	    min-height: 2rem;
	    width: 100%;
	    bottom: 0;
	    padding: .5rem;
	    color: white;
	}

	&:hover {
	    .description {
		opacity: 1;
	    }
	    .overlay-one {
		opacity: 1;
	    }
	    .overlay-two {
		opacity: 0;
	    }
	    .image {
		.color { opacity: 1; }
		.bw { opacity: 0; }
	    }
	}
    }

}

