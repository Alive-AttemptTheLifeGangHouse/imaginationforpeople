{% extends "base.html" %}
{% load i18n %}
{% load compress %}
{% load cms_tags %}  

{% block style %}
    {% compress css %}
    <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}css/fonts.css" />
    <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}css/homepage.css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}css/anythingslider.css" type="text/css" media="screen" />
    {% endcompress %}
{% endblock %}

{% block extra_head %}
  {{ block.super }}
  
    {% compress js %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery/hoverIntent.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.ezmark.js"></script>

    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery/jquery.anythingslider.js" ></script>
    
    <script type="text/javascript" src="{{ STATIC_URL }}js/homepage/boxes.js" ></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/homepage/slider.js" ></script>


    <script type="text/javascript">
    $(document).ready(function(){
    
    // Text example for forms
        $("#quick_project input[name=title]").example("{% trans 'My project title'|escapejs %}");
        $("#quick_project input[name=baseline]").example("{% trans 'One line description'|escapejs %}");
        
        
    // AJAX Focus Zone 
    var sections = $("#focus-menu .focus-filters li");  
    var loading = $("#loading");     
    var content = $("#projects_slide"); 

    function showLoading(){  
    
        $("#projects_slide").fadeOut(0);

        loading  
            .css({visibility:"visible"})  
            .css({opacity:"1"})  
            .css({display:"block"})  
        ;  
    }  

    //hide loading bar  
    function hideLoading(){  
        loading.fadeTo(800, 0);
        
        //Slider initialization after AJAX loading
        $("#projects_slide").anythingSlider({width:977, height:290,  easing: "swing", delay: 5000, animationTime: 1000, buildArrows: false, buildNavigation: false, autoPlay: true, startPanel: 1});
         
        //Projects rollover reset
        $("#projects_slide ul .focus_project").hover(function(){
            $(this).find(".project_title_cover").fadeOut(150);
        }).mouseleave(function(){
            $(this).find(".project_title_cover").fadeIn(0);
        });
    };   
        

    //Projects slider manage click events
    sections.click(function(){
        //show the loading bar
        showLoading();

        //load selected section
        switch(this.id){
            case "projects-discover":
                content.load("{% url i4p-homepage-ajax-slider-bestof %}", hideLoading);
                $("#projects_slide").anythingSlider(1).delay(900).fadeIn(150);; // Reset to first slide
                $("#projects_slide").data("AnythingSlider").startStop(true);
                break;
            case "projects-recents":
                content.load("{% url i4p-homepage-ajax-slider-latest %}", hideLoading);
                $("#projects_slide").anythingSlider(1).delay(900).fadeIn(150);; // Reset to first slide
                $("#projects_slide").data("AnythingSlider").startStop(true).delay(550);
                break;
            case "projects-comments":
                content.load("{% url i4p-homepage-ajax-slider-commented %}", hideLoading);
                $("#projects_slide").anythingSlider(1).delay(900).fadeIn(150);; // Reset to first slide
                $("#projects_slide").data("AnythingSlider").startStop(true);
                $("#projects_slide").delay(550).removeClass("hidden");
                break;
            case "projects-help":
                content.load("", hideLoading);
                break;
            default:
                //hide loading bar if there is no selected section
                hideLoading();
                break;
            }        
        });
        
        //Load bestof projects slider by default
        showLoading();
        content.load("{% url i4p-homepage-ajax-slider-bestof %}", hideLoading);
        $("#projects_slide").fadeIn(0);
    
    });



    </script>
    {% endcompress %}

{% endblock %}



{% block nav %}
    <div id="video-zone">
        <div id="video" class="center"> 

            <h1 class="what_is">{% trans ' What is it ?' %}</h1>

            <div id="project_block">
                <h1>{% trans 'Explore and contribute' %}</h1>
                {% trans 'to social and cultural projects' %}
            </div>
            
            <div id="network_block">
                <h1>{% trans 'Join the community' %}</h1>
                {% trans 'of citizens from more 30 countries' %}
            </div>
            
            <div class="baseline">"{% trans ' Detect and develop socially innovative projects.' %}"</div>
        
            <img src="{{ STATIC_URL }}images/home/video.jpg" alt="Imagination for People" width="982" height="132"/>
        </div>
    </div>
    
    {% include "home-blocks/focus-zone.html" %}     

{% endblock %}

{% block content %}

<!-- Facebook Likebox init -->
<div id="fb-root"></div>
<script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/fr_FR/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

{% comment %}
<!-- Newsletter popup -->
{% include "home-blocks/newsletter-popup.html" %}            
{% endcomment %}

        
<div id="content-zone">

    <div id="content" class="center">
        
        <div id="left_col">
        
        
        
        <!-- TEMP!!! -->
        
    <div class="infoblock">
        <a href="{% url project_sheet-start %}"><img class="image" src="{{ STATIC_URL }}images/ip-illus.jpg" alt="Titre du projet" width="250" height="250"/></a>
        <div class="details">
            <div class="description"> 
                {% blocktrans %}
                <p>
                    As a project leader, please describe your initiative and make use of the first functionalities of this platform: 
                </p>
                <ul>
                    <li>Create a display page for your project, to provide a summary explanation of your initiative and to allow others to discover your project</li>
                    <li>Use the internal messaging system to connect with other people interested in your project</li>
                    <li>Publically express your project development needs and thus, potentially connect with people who can fill these needs</li>
                    <li>Share your project on other social networks</li>
                </ul>                
                <p>
                    Very soon, new functionalities will be added that will help speed up the development of your projects. 
                </p>
                {% endblocktrans %}
            </div>            
        </div>
        <div class="clear"></div>
    </div>    

    <div class="infoblock">
            <a href="http://montrealcreative.org/"><img class="image" src="{{ STATIC_URL }}images/montreal-illus.jpg" alt="Titre du projet" width="250" height="250"/></a>
            <div class="details">
                <a href="http://montrealcreative.org/"><h1>{% trans "Launching of Montreal's accelerator of innovative projects" %}</h1></a>
                
                <div class="description"> 
                    {% blocktrans %}
                    <p>
                        The mission of the Montreal Creative site is to showcase the talent, innovative spirit and creativity of all organizations that sparked out of Montreal.             
                    </p>
                    <ul>
                        <li>World famous for its <strong>cultural richness and for the talent of its entrepreneurs and creators</strong></li>
                        <li>A member of the UNESCO network of Creative Cities that awarded Montreal the status of a UNESCO City of Design</li>
                        <li>A vibrant community with <strong>social innovation and civic creativity</strong> at its core</li>
                        <li>A <strong>booming</strong> creative economy</li>
                    </ul>
                    {% endblocktrans %}
                </div>
                
            </div>
            <div class="clear"></div>
        </div>         
        
        
        <!-- /TEMP!!! -->
        
        
            {% comment %}

                <!-- 2 last news -->
                {% include "home-blocks/infoblock.html" %}     
                
                {% placeholder banners %}
            
                {% include "home-blocks/blog-box.html" %} 
                
                {% include "home-blocks/twitter-box.html" %} 
                
            {% endcomment %}

        </div>
         
        <div id="right_col">
            
            {% comment %}
                {% include "search.html" %}            
                <div class="clear"></div><br />
            {% endcomment %}
            
            <span>
                {% placeholder site_purpose or %}{% trans 'You can <strong>contribute</strong> , <strong>share</strong> your ideas,  <strong>register</strong> your project' %}{% endplaceholder %}
            </span>
            
            <!-- Loginbox -->
            {% include "home-blocks/loginbox.html" %}     

            <!-- Quick Project -->
            <!-- FIXME -->
            {% comment %}
                {% include "home-blocks/quick_project.html" %} 
            {% endcomment %}            
            
            <!-- Last members -->
            {% include "home-blocks/last_members.html" %}     
            
            <!-- Facebook friendbox -->
            {% include "home-blocks/fb-fanbox.html" %}    
            
        </div>
        
        <div class="clear"></div>

    </div>

    <div class="clear"></div>

    </div>	
{% endblock %}
