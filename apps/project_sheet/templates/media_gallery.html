{% load i18n %}
{% load oembed_works_tags %}

{% if picture_form %}
<!-- MEDIA - edition mode -->
<div id="project_photo_upload_edit">
	<h1>{% trans "upload a media"|capfirst %}</h1>
	
	<div id="forms_files">
		{% if project_translation %}		
			<form method="post"id="photo_upload_form"  action="{% url project_sheet-instance-add-picture project_translation.slug %}" enctype="multipart/form-data" >{% csrf_token %}
		{% else %}
			<form method="post" id="photo_upload_form"  action="{% url project_sheet-add-picture %}" enctype="multipart/form-data">{% csrf_token %}
		{% endif %}
		
				<p><label for="#" class="bold">{% trans "Choose an image to upload :"|capfirst %}</label> <span class="precision"></span>{{ picture_form.original_image }}</p>
					
				<div class="clear"></div>
				
				<p class="media_desc_up left"><label>{% trans 'Description :'|capfirst %}</label> <input type="text"name="#" id="#" /></p>
				<p class="media_licence_select">	
					<label>{% trans 'Licence :'|capfirst %}</label> 						
					<select name="#">
						<option>Licence IV</option>
						<option>Licence à la pompe</option>
						<option>Licence assion</option>
						<option>Licence assfriture</option>
					</select>
				</p>
				<p class="media_licence_up left"><label>{% trans 'Author :'|capfirst %}</label> <input type="text"name="#" id="#" /></p>
				<p class="media_licence_up left"><label>{% trans 'Source :'|capfirst %}</label> <input type="text"name="#" id="#" /></p>
				
				<div class="clear"></div>
				
				<input id="upload_img_input" class="button nomargin right" type="submit" value="{% trans 'Upload'|capfirst %}" enctype="multipart/form-data"/>
				
			</form>
		
		{% if project_translation %}		
			<form method="post" id="vid_upload_form"  action="{% url project_sheet-instance-add-video project_translation.slug %}" >{% csrf_token %}
		{% else %}
			<form method="post" id="vid_upload_form"  action="{% url project_sheet-add-video %}">{% csrf_token %}
		{% endif %}
			<p>
				<label for="#" class="bold">{% trans "add a video (youtube, dailymotion, etc): "|capfirst %}</label><span class="precision"></span>
				{{ video_form.video_url }}
				<input class="greenbutton nomargin right" type="image" src="{{ MEDIA_URL }}/images/base/v.png" Alt="Ok" />
			</p>
		</form>			
	</div>
	<a href="javascript:history.go(-1);" class="redbutton nomargin right"><img src="{{ MEDIA_URL }}/images/base/x.png" alt="X" /></a>	
</div>
{% else %}
	{% if project_translation %}
		{% if project_translation.project.pictures.count or project_translation.project.videos.count %}
			
			<!-- MEDIA - created project - with pictures -->
			<div id="project_photo_gallery">
				
				<div id="media_buttons">
					<a href="{% url project_sheet-instance-add-media project_translation.slug %}" class="button nomargin"><img title="{% trans 'Add'|capfirst %}" src="{{ MEDIA_URL }}/images/base/add.png" alt="+" /></a>
					<a href="#" class="button nomargin"><img title="{% trans 'Metadata'|capfirst %}" src="{{ MEDIA_URL }}/images/base/infos.png" alt="?" /></a>
					<a href="#" class="button redbutton nomargin"><img title="{% trans 'Delete'|capfirst %}" src="{{ MEDIA_URL }}/images/base/x.png" alt="X" /></a>
				</div>
	
				<div id="gallery">
					<ul id="project_photo_gallery_current_photo">

						{% for pic in project_translation.project.pictures.all %}
							<li><img src="{{pic.display.url}}" alt="" ></li>
						{% endfor %}
						{% for vid in project_translation.project.videos.all %}
							<li>{% oembed %}{{vid.video_url}}{% endoembed %}</li>
						{% endfor %}
					</ul>
					<ul id="project_photo_gallery_mini" class="jcarousel-skin-tango">
						{% for pic in project_translation.project.pictures.all %}
							<li><a onclick="changeslider({{forloop.counter}});" href="javascript:;"><img src="{{pic.thumbnail_image.url}}" alt="" /></a></li>
						{% endfor %}

						{% for vid in project_translation.project.videos.all %}
							<li>
								<a onclick="changeslider({{forloop.counter|add:project_translation.project.pictures.count}});" href="javascript:;">
									<img src="{{MEDIA_URL}}/images/play_video.png" alt="Play" height="48" width="48"/>
								</a>
							</li>

						{% endfor %}
					</ul>
				</div>				
			</div>
		{% else %}
			<!-- MEDIA - created project - no pictures -->
			<a href="{% url project_sheet-instance-add-media project_translation.slug %}">
				<div id="project_photo_upload">
				</div>
			</a>
		{% endif %}	
	{% else %}
		<!-- MEDIA - no project - no pictures -->
		<a href="{% url project_sheet-add-media %}">
			<div id="project_photo_upload">
			</div>
		</a>
	{% endif %}
{% endif %}
